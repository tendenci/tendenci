{% extends "attorneys/base.html" %}
{% load pagination_tags %}
{% load attorneys_tags %}
{% load perm_tags %}
{% load box_tags %}
{% load base_filters %}
{% load base_tags %}

{% block title %}Attorneys{% endblock %}

{% block extra_head %}
{{ block.super }}
<style type="text/css">
{% include "attorneys/media/css/attorneys.css" %}
</style>
{% endblock %}

{% block body %}

{% has_perm user attorneys.add_attorney as can_add_attorney %}
<div class="t">
    <h1>Attorneys</h1>
    {% list_boxes as boxes limit=1 tags="attorneyheader" %}
    {% for box in boxes %}
        <div class="boxes">{{ box.safe_content }}
        {% include 'boxes/edit-link.html' %}</div>
    {% endfor %}
    <div class="attorneys">
        <h2>Shareholders</h2>
        {% for attorney in attorneys %}
        {% with attorney|get_object as attorney %}
        {% ifequal "SH" attorney.category %}
        <div class="attorney-item" id="attorney-{{ attorney.pk }}">    
            <div class="name">
                <h3><a href="{{ attorney.get_absolute_url }}">{{ attorney.name }}</a></h3>
            </div>
            {% if attorney.photo %}
            <div class="photo" id="attorney-{{ attorney.pk }}-photo" style="display: none;">
                <img src="{% image_url attorney.photo size=120x165 crop=true quality=80 %}" title="{{ attorney.name }}"  />
            </div>
            {% endif %}
            <div style="clear:both"></div>
        </div>
        {% endifequal %}
        {% endwith %}
        {% endfor %}
    </div>
    <div class="attorneys">
        <h2>Of Counsel</h2>
        {% for attorney in attorneys %}
        {% with attorney|get_object as attorney %}
        {% ifequal "OF" attorney.category %}
        <div class="attorney-item" id="attorney-{{ attorney.pk }}">    
            <div class="name">
                <h3><a href="{{ attorney.get_absolute_url }}">{{ attorney.name }}</a></h3>
            </div>
            {% if attorney.photo %}
            <div class="photo" id="attorney-{{ attorney.pk }}-photo" style="display: none;">
                <img src="{% image_url attorney.photo size=120x165 crop=true quality=80 %}" title="{{ attorney.name }}"  />
            </div>
            {% endif %}
            <div style="clear:both"></div>
        </div>
        {% endifequal %}
        {% endwith %}
        {% endfor %}
    </div>
    <div class="attorneys">
        <h2>Associates</h2>
        {% for attorney in attorneys %}
        {% with attorney|get_object as attorney %}
        {% ifequal "AS" attorney.category %}
        <div class="attorney-item" id="attorney-{{ attorney.pk }}">    
            <div class="name">
                <h3><a href="{{ attorney.get_absolute_url }}">{{ attorney.name }}</a></h3>
            </div>
            {% if attorney.photo %}
            <div class="photo" id="attorney-{{ attorney.pk }}-photo" style="display: none;">
                <img src="{% image_url attorney.photo size=120x165 crop=true quality=80 %}" title="{{ attorney.name }}"  />
            </div>
            {% endif %}
            <div style="clear:both"></div>
        </div>
        {% endifequal %}
        {% endwith %}
        {% endfor %}
    </div>
        
    {% if can_add_attorney %}
    <div><a href="{% url admin:attorneys_attorney_add %}">Add Attorney</a></div>
    {% endif %}
</div>
{% endblock body %}

{% block extra_body %}
{{ block.super }}
<script type="text/javascript">
$(".attorney-item").hover(
  function () {
    $("#"+this.id+"-photo").show();
  }, 
  function () {
    $("#"+this.id+"-photo").hide();
  }
);
</script>
{% endblock %}
