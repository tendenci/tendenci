{% extends "reports/base.html" %}
{% load membership_tags %}
{% load bootstrap_pagination_tags %}
{% load base_tags %}

{% block content %}
<div class="page-header">
  <h1>{% trans "Current Members Quick List" %}
{% if region_name %}
 - {{ region_name }}
{% endif %}
</h1>

</div>
{% autopaginate members 50 %}
<div class="mems-wrap">

<p class="pull-left">
{% if members %}
<a class="btn btn-primary" href="{% url "reports-members-quick-list" %}?output=csv{{ region_url_param }}">

    {% trans 'Download CSV File' %}</a>
{% endif %}
    {% search_region_form %}
    </p>
{% if members %}
<p><a class="btn btn-primary" href="{% url "reports-members-quick-list" %}?output=csv">
    {% trans 'Download CSV File' %}</a></p>
    <p>{{ members | length }} active members</p>

    <table class="table table-tendenci-reports">
        <tr>
            <th><a href="{% order_by request order_by 'member_number_int' %}">{% trans "Member Number" %}</a></th>
            <th><a href="{% order_by request order_by 'membership_type' %}">{% trans "Membership Type" %}</a></th>
            <th><a href="{% order_by request order_by 'user__last_name' %}">{% trans "Last Name" %}</a></th>
            <th><a href="{% order_by request order_by 'user__first_name' %}">{% trans "First Name" %}</a></th>
            <th><a href="{% order_by request order_by 'user__profile__company' %}">{% trans "Company" %}</a></th>
            <th>{% if members.first.user_group_list %}
            		<a href="{% order_by request order_by 'user_group_list' %}">
	            {% endif %}
	            {% trans "Groups" %}
	            {% if member.user_group_list %}
	            	</a>
	            {% endif %}
	         </th>
        </tr>
        {% for member in members %}
        <tr>
            <td>{{ member.member_number }}</td>
            <td>{{ member.membership_type }}</td>
            <td>{{ member.user.last_name }}</td>
            <td>{{ member.user.first_name }}</td>
            <td>{{ member.user.profile.company }}</td>
            <td>{% if member.user_group_list %}
	            	{{ member.user_group_list }}
	            {% else %}
					{% for group in member.user.user_groups.all %}
					    {{ group.name }} {% if not forloop.last %}, {% endif %} 
					{% endfor %}
	            {% endif %}
			</td>
        </tr>
        {% endfor %}
    </table>
{% else %}
{% trans "No active members." %}
{% endif %}
{% paginate %}
</div>
{% endblock content %}
